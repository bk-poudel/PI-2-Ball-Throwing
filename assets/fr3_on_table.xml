<mujoco model="fr3_on_table">
    <compiler angle="radian" meshdir="mj_assets" autolimits="true" inertiafromgeom="auto" inertiagrouprange="4 4"/>
    <statistic center="0.3 0 0.4" extent="1"/>
    <option integrator="implicitfast"/>
    <visual>
        <headlight diffuse="0.6 0.6 0.6" ambient="0.3 0.3 0.3" specular="0 0 0"/>
        <rgba haze="0.15 0.25 0.35 1"/>
        <global azimuth="120" elevation="-20"/>
    </visual>
    <asset>
        <include file="./table_assets.xml"/>
        <include file="./fr3_assets.xml"/>
        <mesh name="cup" file="cup.obj" scale="4 4 1"/>
    </asset>
    <default>
        <include file="./table_default.xml"/>
        <include file="./fr3_default.xml"/>
    </default>
    <worldbody>
        <light name="top" pos="0 0 2" mode="trackcom"/>
        <light pos="0 0 1.5" dir="0 0 -1" directional="true"/>
        <body name="fixed_camera" pos="0 -0.4 0.8">
            <camera name="franka_camera" mode="fixed" euler="-1.5708 0 3.1416" focalpixel="250 250" principalpixel="0 0" resolution="500 500" sensorsize="2e-2 2e-2"/>
        </body>
        <include file="./table_body.xml"/>
        <include file="./fr3_on_table_body.xml"/>
        <!-- <body name="redblock" pos="0.075 -0.13 1">
            <inertial mass="0.01" pos="0 0 0" fullinertia="0.01 0.01 0.01 0 0 0"/>
            <geom size="0.24 0.13 0.18" type="box" rgba="1 0.3412 0.349 1" friction="0.95 0.3 0.1" condim="4"/>
        </body> -->
        <!-- <body name="cup" pos="-0.4 0.1 0.85">
            <joint name="cup_joint" type="free"/>
            <inertial mass="1." pos="0 0 0" fullinertia="0.1 0.1 0.1 0 0 0"/>
            <geom type="mesh" rgba="0.34902 0.662745 0.309804 1" mesh="cup"/>
        </body> -->
        <body name="target_box_body" pos="0 -0.7 0">
            <!-- Bottom -->
            <geom name="box_bottom" type="box" pos="0 0 -0.05" size="0.1 0.1 0.01" rgba="1 0 0 0.5" />
            <!-- Left Wall -->
            <geom name="box_left" type="box" pos="-0.09 0 0.015" size="0.01 0.1 0.7" rgba="1 0 0 0.5"/>
            <!-- Right Wall -->
            <geom name="box_right" type="box" pos="0.09 0 0.015" size="0.01 0.1 0.7" rgba="1 0 0 0.5"/>
            <!-- Front Wall -->
            <geom name="box_front" type="box" pos="0 -0.09 0.015" size="0.1 0.01 0.7" rgba="1 0 0 0.5"/>
            <!-- Back Wall -->
            <geom name="box_back" type="box" pos="0 0.09 0.015" size="0.1 0.01 0.7" rgba="1 0 0 0.5"/>
            <site name="box_center" pos="0 0 0.01" size="0.01" rgba="0 1 0 1"/>
        </body>
        <body name="ball" pos="-0.003 0.161 1.64"> <!-- Initial position doesn't matter much due to the weld pos="0 -0.056 1.313" -->
           <joint name="ball_free" type="free"/>
            <inertial mass="0.01" pos="0 0 0" fullinertia="0.01 0.01 0.01 0 0 0"/>
            <geom size="0.035 " type="sphere" rgba="1 0.3412 0.349 1" friction="0.95 0.3 0.1" condim="4"/>
        </body>
   <!-- Red X axis -->
<geom type="capsule" fromto="0 0 0 0.1 0 0" size="0.008" rgba="1 0 0 1"/>
<!-- Green Y axis -->
<geom type="capsule" fromto="0 0 0 0 0.1 0" size="0.008" rgba="0 1 0 1"/>
<!-- Blue Z axis -->
<geom type="capsule" fromto="0 0 0 0 0 0.1" size="0.008" rgba="0 0 1 1"/>
    </worldbody>
    <include file="./fr3_motors.xml"/>
    <sensor>
        <force name="ee_force" site="right_finger_site"/>
        <torque name="ee_torque" site="right_finger_site"/>
    </sensor>
    <equality>
<weld name="ball_weld" body1="hand" body2="ball" active="false"/>
</equality>
</mujoco>